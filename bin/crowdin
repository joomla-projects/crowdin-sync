#!/usr/bin/env php
<?php declare(strict_types=1);
/**
 * Joomla! Crowdin Synchronization Script
 *
 * @copyright  Copyright (C) 2016 - 2019 Open Source Matters, Inc. All rights reserved.
 * @license    http://www.gnu.org/licenses/gpl-2.0.txt GNU General Public License Version 2 or Later
 */

use Composer\Autoload\ClassLoader;
use Joomla\Crowdin\ApplicationFactory;

/*
 * Try locating Composer's autoloader
 *
 * This lookup supports running this script directly from the project repository or installed within a Composer project
 * from the `vendor/joomla/crowdin-sync/bin` directory
 */
foreach ([__DIR__ . '/../vendor/autoload.php', __DIR__ . '/../../../autoload.php'] as $autoloadPath)
{
	if (file_exists($autoloadPath))
	{
		include $autoloadPath;

		break;
	}
}

// If the autoloader isn't loaded, we can't go further
if (!class_exists(ClassLoader::class))
{
	fwrite(
		STDERR,
		'The project dependencies are not installed.  Please run "composer install".' . PHP_EOL
	);

	exit(1);
}

ApplicationFactory::createApplication()->execute();
